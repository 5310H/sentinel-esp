<!DOCTYPE html>
<html>
<head>
    <title>Sentinel Mock Dashboard</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
        .card { background: white; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn { padding: 10px 20px; margin: 5px; cursor: pointer; border: none; border-radius: 4px; background: #007bff; color: white; }
        .btn-relay { background: #28a745; }
        .status-on { color: green; font-weight: bold; }
        .status-off { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Sentinel Control Panel</h1>
    
    <div class="card">
        <h3>System Status</h3>
        <div id="arm-status">Loading...</div>
    </div>

    <div class="card">
        <h3>Zones (Sensors)</h3>
        <div id="zone-list">No zones found.</div>
    </div>

    <div class="card">
        <h3>Relays (Hardware)</h3>
        <div id="relay-list">No relays found.</div>
    </div>

    <script>
        function loadConfig() {
            fetch('/api/config')
                .then(res => res.json())
                .then(data => {
                    document.getElementById('arm-status').innerText = data.armed ? "ARMED" : "DISARMED";
                    
                    // Render Zones
                    const zoneDiv = document.getElementById('zone-list');
                    zoneDiv.innerHTML = data.zones.map(z => 
                        `<div class="card"><b>${z.name}</b> (${z.type}) <button class="btn" onclick="triggerZone(${z.id})">Trigger Alarm</button></div>`
                    ).join('');

                    // Render Relays
                    const relayDiv = document.getElementById('relay-list');
                    relayDiv.innerHTML = data.relays.map(r => 
                        `<button class="btn btn-relay">Relay ${r.id} (${r.type})</button>`
                    ).join('');
                })
                .catch(err => {
                    document.getElementById('arm-status').innerHTML = '<span class="status-off">Error connecting to API</span>';
                });
        }

        function triggerZone(id) {
            console.log("Triggering zone:", id);
            alert("Zone " + id + " triggered! Check terminal for MOCK HAL output.");
        }

        // Load data immediately
        loadConfig();
    </script>
</body>
</html>
